<div class="totals-holder">
  <div class="row border-top">
    <div class="offset-md-2 col-md-10">
      <div class="totals">
        <div class="row mb-2">
          <div class="col">
            <div class="label ps-2">
              <input type="text" class="form-control form-control-sm input-label border-0" value="Subtotal">
            </div>
          </div>
          <div class="col text-end">
            <span class="currency">{{currency}}</span>
            <span class="amount">{{subtotal | number:'1.2-2'}}</span>
          </div>
        </div>

        <!-- Tax Entry -->
        <div class="row mb-2" *ngIf="showTax">
          <div class="col">
            <div class="label">
              <div class="input-group input-group-sm">
                <span class="input-group-text border-0 bg-transparent text-success"></span>
                <input type="text" class="form-control form-control-sm input-label border-0" value="Tax">
                <span class="input-group-text">%</span>
                <input type="number" min="0" max="100" step="0.01" class="form-control form-control-sm" tabindex="1019"
                       [(ngModel)]="taxRate" 
                       (change)="updateTaxRate(taxRate)">
                <button class="btn btn-sm btn-link text-success" (click)="toggleTax()">×</button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Discount Entry -->
        <div class="row mb-2" *ngIf="showDiscount">
          <div class="col">
            <div class="label">
              <div class="input-group input-group-sm">
                <span class="input-group-text border-0 bg-transparent text-success"></span>
                <input type="text" class="form-control form-control-sm input-label border-0" value="Discount">
                <span class="input-group-text">%</span>
                <input type="number" min="0" max="100" step="0.01" class="form-control form-control-sm" tabindex="1021"
                       [(ngModel)]="discountRate" 
                       (change)="updateDiscountRate(discountRate)">
                <button class="btn btn-sm btn-link text-success" (click)="toggleDiscount()">×</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Optional Shipping Entry -->
        <div class="row mb-2" *ngIf="showShipping">
          <div class="col">
            <div class="label">
              <div class="input-group input-group-sm">
                <span class="input-group-text border-0 bg-transparent text-success"></span>
                <input type="text" class="form-control form-control-sm input-label border-0" value="Shipping">
                <span class="input-group-text">{{currency}}</span>
                <input type="number" min="0" step="0.01" class="form-control form-control-sm" tabindex="1023"
                     [(ngModel)]="shippingAmount" 
                     (change)="updateShippingAmount(shippingAmount)">
                <button class="btn btn-sm btn-link text-success" (click)="toggleShipping()">×</button>
            </div>
          </div>
        </div>
        </div>
        
        <!-- Plus Buttons Row -->
        <div class="row mb-2">
          <div class="col">
            <div class="d-flex justify-content-end">
              <button class="btn btn-link text-success me-2" 
                      *ngIf="!showDiscount"
                      (click)="toggleDiscount()">
                + Discount
              </button>
              <button class="btn btn-link text-success me-2" 
                      *ngIf="!showTax"
                      (click)="toggleTax()">
                + Tax
              </button>
              <button class="btn btn-link text-success me-2" 
                      *ngIf="!showShipping"
                      (click)="toggleShipping()">
                + Shipping
              </button>
            </div>
          </div>
        </div>

        <!-- Grand Total -->
        <div class="row border-top pt-2 mb-2">
          <div class="col">
            <div class="label total ps-2">
              <input type="text" class="form-control form-control-sm input-label border-0" value="Total">
            </div>
          </div>
          <div class="col text-end">
            <div class="total">
              <span class="currency">{{currency}}</span>
              <span class="amount">{{total | number:'1.2-2'}}</span>
            </div>
          </div>
        </div>

        <!-- Amount Paid Field -->
        <div class="row mb-2">
          <div class="col">
            <div class="label ps-2">
              <input type="text" class="form-control form-control-sm input-label border-0" value="Amount Paid">
            </div>
          </div>
          <div class="col text-end">
            <div class="input-group input-group-sm">
              <span class="input-group-text">{{currency}}</span>
              <input type="number" min="0" step="0.01" class="form-control form-control-sm text-end" tabindex="1024"
                     [(ngModel)]="amountPaid" 
                     (change)="updateAmountPaid(amountPaid)">
            </div>
          </div>
        </div>

        <!-- Balance Due Display -->
        <div class="row border-top pt-2">
          <div class="col">
            <div class="label ps-2">
              <input type="text" class="form-control form-control-sm input-label border-0" value="Balance Due">
            </div>
          </div>
          <div class="col text-end">
            <div class="due">
              <span class="currency">{{currency}}</span>
              <span class="amount">{{balanceDue | number:'1.2-2'}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
